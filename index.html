<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Auth - ClassGraud</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
      /* small tweaks for combined auth layout */
      .auth-box {
        max-width: 820px;
        margin: 48px auto;
        display: flex;
        gap: 20px;
        align-items: flex-start;
      }
      .auth-left,
      .auth-right {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.06);
      }
      .auth-left {
        flex: 1;
      }
      .auth-right {
        width: 360px;
      }
      .tabs {
        display: flex;
        gap: 8px;
        margin-bottom: 12px;
      }
      .tabs button {
        padding: 8px 14px;
        border-radius: 6px;
        border: 1px solid #e6e6e6;
        background: #fff;
        cursor: pointer;
      }
      .tabs button.active {
        background: #667eea;
        color: #fff;
        border-color: #667eea;
      }
      .hidden {
        display: none;
      }
      .role-select {
        margin-bottom: 12px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="auth-box">
        <div class="auth-left">
          <h1>ClassGraud</h1>
          <p class="small" style="color: #666">
            Sign in or create an account â€” choose your user type below.
          </p>

          <div class="tabs" role="tablist">
            <button id="tab-login" class="active" data-tab="login">
              Login
            </button>
            <button id="tab-register" data-tab="register">Register</button>
          </div>

          <!-- LOGIN TAB -->
          <div id="panel-login">
            <div class="role-select">
              <label for="login-role">I am a</label>
              <select id="login-role">
                <option value="student">Student</option>
                <option value="teacher">Teacher</option>
              </select>
            </div>

            <!-- Student login form (keeps original IDs so existing JS attaches) -->
            <div id="login-student-panel">
              <form id="student-login-form">
                <div class="input-group">
                  <label for="s-username">Username</label>
                  <input id="s-username" type="text" required />
                </div>
                <div class="input-group">
                  <label for="s-password">Password</label>
                  <input id="s-password" type="password" required />
                </div>
                <button type="submit" class="login-btn">
                  Login as Student
                </button>
              </form>
            </div>

            <!-- Teacher login form -->
            <div id="login-teacher-panel" class="hidden">
              <form id="teacher-login-form">
                <div class="input-group">
                  <label for="t-username">Username</label>
                  <input id="t-username" type="text" required />
                </div>
                <div class="input-group">
                  <label for="t-password">Password</label>
                  <input id="t-password" type="password" required />
                </div>
                <button type="submit" class="login-btn">
                  Login as Teacher
                </button>
              </form>
            </div>
          </div>

          <!-- REGISTER TAB -->
          <div id="panel-register" class="hidden">
            <div class="role-select">
              <label for="register-role">Register as</label>
              <select id="register-role">
                <option value="student">Student</option>
                <option value="teacher">Teacher</option>
              </select>
            </div>

            <!-- Student register form -->
            <div id="register-student-panel">
              <form id="student-register-form">
                <div class="input-group">
                  <label for="s-name">Full Name</label>
                  <input id="s-name" type="text" required />
                </div>
                <div class="input-group">
                  <label for="s-username">Username</label>
                  <input id="s-username" type="text" required />
                </div>
                <div class="input-group">
                  <label for="s-password">Password</label>
                  <input id="s-password" type="password" required />
                </div>
                <div class="input-group">
                  <label for="s-class">Class / Roll</label>
                  <input
                    id="s-class"
                    type="text"
                    placeholder="e.g., Class 10A"
                    required
                  />
                </div>
                <button type="submit" class="login-btn">
                  Register Student
                </button>
              </form>
            </div>

            <!-- Teacher register form -->
            <div id="register-teacher-panel" class="hidden">
              <form id="teacher-register-form">
                <div class="input-group">
                  <label for="t-name">Full Name</label>
                  <input id="t-name" type="text" required />
                </div>
                <div class="input-group">
                  <label for="t-username">Username</label>
                  <input id="t-username" type="text" required />
                </div>
                <div class="input-group">
                  <label for="t-password">Password</label>
                  <input id="t-password" type="password" required />
                </div>
                <div class="input-group">
                  <label for="t-subject">Subject Specialization</label>
                  <input id="t-subject" type="text" required />
                </div>
                <button type="submit" class="login-btn">
                  Register Teacher
                </button>
              </form>
            </div>
          </div>
        </div>

        <div class="auth-right">
          <h3>Quick Links</h3>
          <div style="margin-bottom: 12px">
            <img
              src="https://media.istockphoto.com/id/1182304971/vector/planner-schedule-calendar-time-timetable-concept-vector-flat-graphic-design-illustration.jpg?s=612x612&w=0&k=20&c=EGykM8sGj_QRCELjZILmrh5kPVQVO_QCQzivVJYxXVM="
              alt="Timetable Illustration"
              style="
                width: 100%;
                max-width: 320px;
                height: auto;
                display: block;
                margin-bottom: 8px;
                border-radius: 8px;
              "
            />
          </div>
          <p><a href="about.html">About</a></p>
          <p><a href="choose-login.html">Choose Login</a></p>
          <p style="color: #666; font-size: 0.9rem">
            Tip: Use the tabs to switch between Login and Register. Choose
            Student or Teacher from the dropdowns.
          </p>
        </div>
      </div>
    </div>

    <!-- include the existing auth scripts so they attach to forms by ID -->
    <script src="student-auth.js"></script>
    <script src="teacher-auth.js"></script>

    <script>
      // Tab + role toggle logic
      function showTab(tab) {
        document
          .getElementById("tab-login")
          .classList.toggle("active", tab === "login");
        document
          .getElementById("tab-register")
          .classList.toggle("active", tab === "register");
        document
          .getElementById("panel-login")
          .classList.toggle("hidden", tab !== "login");
        document
          .getElementById("panel-register")
          .classList.toggle("hidden", tab !== "register");
      }

      function showRoleFor(tab, role) {
        // login
        document
          .getElementById("login-student-panel")
          .classList.toggle("hidden", role !== "student");
        document
          .getElementById("login-teacher-panel")
          .classList.toggle("hidden", role !== "teacher");
        // register
        document
          .getElementById("register-student-panel")
          .classList.toggle("hidden", role !== "student");
        document
          .getElementById("register-teacher-panel")
          .classList.toggle("hidden", role !== "teacher");
      }

      document.addEventListener("DOMContentLoaded", function () {
        // tab buttons
        document
          .getElementById("tab-login")
          .addEventListener("click", function () {
            showTab("login");
            updateHash();
          });
        document
          .getElementById("tab-register")
          .addEventListener("click", function () {
            showTab("register");
            updateHash();
          });

        // role selectors
        const loginRole = document.getElementById("login-role");
        const registerRole = document.getElementById("register-role");
        loginRole.addEventListener("change", function () {
          showRoleFor("login", this.value);
          updateHash();
        });
        registerRole.addEventListener("change", function () {
          showRoleFor("register", this.value);
          updateHash();
        });

        // parse initial hash: #login-student | #register-teacher etc
        const h = (location.hash || "").replace("#", "");
        let initialTab = "login",
          initialRole = "student";
        if (h) {
          const parts = h.split("-");
          if (parts[0] === "register" || parts[0] === "login")
            initialTab = parts[0];
          if (parts[1] === "teacher" || parts[1] === "student")
            initialRole = parts[1];
        }
        showTab(initialTab);
        if (initialTab === "login") {
          loginRole.value = initialRole;
        } else {
          registerRole.value = initialRole;
        }
        showRoleFor(initialTab, initialRole);

        function updateHash() {
          const tab = document
            .getElementById("tab-login")
            .classList.contains("active")
            ? "login"
            : "register";
          const role =
            tab === "login"
              ? document.getElementById("login-role").value
              : document.getElementById("register-role").value;
          location.hash = tab + "-" + role;
        }
      });
    </script>
  </body>
</html>
